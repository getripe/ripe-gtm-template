___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Ripe SDK",
  "categories": ["ANALYTICS"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/jpeg;base64,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"
  },
  "description": "Welcome to the Ripe SDK Google Tag Manager Template.\n\nTo get started, you\u0027ll need your Ripe API key which can be found here: \n\nThen, map your Google Tag Manager data layer to associated fields.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "ripeApiKey",
    "displayName": "Ripe API key",
    "simpleValueType": true,
    "notSetText": "Insert your Ripe API key here"
  },
  {
    "type": "SELECT",
    "name": "type",
    "displayName": "Tag type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "identify",
        "displayValue": "Identify"
      },
      {
        "value": "track",
        "displayValue": "Track"
      },
      {
        "value": "page",
        "displayValue": "Page"
      },
      {
        "value": "group",
        "displayValue": "Group"
      }
    ],
    "simpleValueType": true
  },
  {
    "type": "GROUP",
    "name": "identifyOptions",
    "displayName": "Identify options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "userId",
        "displayName": "User ID",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "notSetText": "If a user_id is not provided an automatically generated anonymous_id will be used"
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "identifyProperties",
        "displayName": "Identify properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "name",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "identify",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "trackOptions",
    "displayName": "Track options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "event",
        "displayName": "Event name",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "eventProperties",
        "displayName": "Event properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "name",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "valueValidators": []
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "track",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "pageOptions",
    "displayName": "Page options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "name",
        "displayName": "Page name",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "The name of the page. For example \"Signup\" or \"Settings\"."
      },
      {
        "type": "TEXT",
        "name": "category",
        "displayName": "Category",
        "simpleValueType": true,
        "help": "Some type of category you want to group the page in. For example \"Website\" or \"iOS app\"."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "pageProperties",
        "displayName": "Page properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "name",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "page",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "groupOptions",
    "displayName": "Group options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "groupId",
        "displayName": "Group ID",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "groupProperties",
        "displayName": "Group properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "name",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "group",
        "type": "EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Require the necessary APIs
const callInWindow = require('callInWindow');
const logToConsole = require('logToConsole');
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const copyFromWindow = require('copyFromWindow');
const makeNumber = require('makeNumber');
const makeString = require('makeString');
const makeTableMap = require('makeTableMap');

// Constants
const LOG_PREFIX = '[Ripe / GTM] ';
const JS_URL = "https://storage.getripe.com/gtag/google-tag.js?apiKey=" + data.ripeApiKey;
const WRAPPER_NAMESPACE = 'Ripe';

// Normalize the input and return it
const normalize = val => {
  if (val === 'null') return null;
  if (val === 'true' || val === true) return true;
  if (val === 'false' || val === false) return false;
  return makeNumber(val) || val;
};

// Normalize the template table properties
const normalizeTable = (table, prop, val) => {
  if (table && table.length) {
    table = table.map(row => {
      const obj = {};
      obj[prop] = row[prop];
      obj[val] = normalize(row[val]);
      return obj;
    });
    return makeTableMap(table, prop, val);
  }
  return false;
};

// Print a log message and set the tag to failed state
const onFailure = msg => {
  logToConsole(LOG_PREFIX + 'Error: ' + msg);
  return data.gtmOnFailure();
};


const onSuccess = () => {
  const _ripe = copyFromWindow(WRAPPER_NAMESPACE);

  if (!_ripe) return onFailure('Failed to load the Ripe SDK wrapper');

  logToConsole(LOG_PREFIX + 'script loaded successfully.');

  switch (data.type) {
    case 'identify':
      const identifyPayload = {
        userId: data.userId,
        traits: normalizeTable(data.identifyProperties, 'name', 'value')
      };

      _ripe.identify(identifyPayload);
      break;
    case 'track':
      const trackPayload = {
        event: data.event,
        properties: normalizeTable(data.eventProperties, 'name', 'value')
      };

      _ripe.track(trackPayload);
      break;
    case 'page':
      const pagePayload = {
        name: data.name,
        properties: normalizeTable(data.pageProperties, 'name', 'value')
      };

      _ripe.page(trackPayload);
      break;
    case 'reset':
      _ripe.reset();
      break;
    case 'group':
      const groupPayload = {
        groupId: data.groupId,
        traits: normalizeTable(data.groupPropertiesProperties, 'name', 'value')
      };

      _ripe.group(groupPayload);
      break;
    default:
      return onFailure("No tag type match");
  }

  data.gtmOnSuccess();
};

// Check the window for Ripe, and inject if does not exist
let _ripe = copyFromWindow(WRAPPER_NAMESPACE);

if (!_ripe) {
  injectScript(JS_URL, onSuccess, onFailure, 'ripe');
} else {
  onSuccess();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.getripe.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "Ripe"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 20/03/2024, 09:32:23


